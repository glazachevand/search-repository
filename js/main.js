!function(){const e=document.getElementsByName("searchform")[0],t=e.elements.search,r=document.querySelector(".repositories");function s(){document.querySelector(".message-error")?.remove(),t.classList.remove("invalid")}function i(e){const t=document.createElement("LI");t.className="repositories__item repositories-item";let r=`<div class="repositories-item__name">\n      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-repo mr-1 color-fg-muted">\n        <path d="M2 2.5A2.5 2.5 0 0 1 4.5 0h8.75a.75.75 0 0 1 .75.75v12.5a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h1.75v-2h-8a1 1 0 0 0-.714 1.7.75.75 0 1 1-1.072\n        1.05A2.495 2.495 0 0 1 2 11.5Zm10.5-1h-8a1 1 0 0 0-1 1v6.708A2.486 2.486 0 0 1 4.5 9h8ZM5 12.25a.25.25 0 0 1 .25-.25h3.5a.25.25 0 0 1 .25.25v3.25a.25.25 0 0\n        1-.4.2l-1.45-1.087a.249.249 0 0 0-.3 0L5.4 15.7a.25.25 0 0 1-.4-.2Z"></path>\n      </svg>\n      <a href="${e.html_url}" target="_blank">${e.name}</a>\n    </div>`;e.description&&(r+=`<p class="repositories-item__description">${e.description}</p>`),e.owner.login&&(r+=`<div class="repositories-item__login"><span>Логин:</span> <a href="${e.owner.html_url}" target="_blank" >${e.owner.login}</a></div>`),e.created_at&&(r+=`<div class="repositories-item__date"><time datetime="${e.created_at}">Дата создания: ${new Date(e.created_at).toLocaleDateString("ru-RU")}</time></div>`),e.updated_at&&(r+=`<div class="repositories-item__date"><time datetime="${e.updated_at}">Дата последнего обновления: ${new Date(e.updated_at).toLocaleDateString("ru-RU")}</time></div>`),e.homepage&&(r+=`<div class="repositories-item__homepage"><a href="${e.homepage}" target="_blank" >Сайт</a></div>`),t.innerHTML=r,document.querySelector(".repositories__list").append(t)}document.querySelector(".search-repo__notes span").textContent=3,e.addEventListener("submit",(function(e){if(e.preventDefault(),s(),!function(e){return!(e.search.value.length<3&&(function(){const e=document.createElement("div");e.className="message-error",e.innerHTML="Введите подстроку не менее 3 символов",e.style.left=0,e.style.top="5px",t.classList.add("invalid"),document.querySelector(".search-repo__search-row").after(e)}(),1))}(this))return;document.querySelector(".search-results__title span").innerHTML="",r.innerHTML='<div class="preloader-container"><div class="preloader"></div></div>';let a=new URL(`https://api.github.com/search/repositories?q=${t.value}+in:name`);this.check.checked&&(a.searchParams.set("sort","stars"),a.searchParams.set("order","desc")),fetch(a,{headers:{Accept:"application/vnd.github.text-match+json"}}).then((e=>{if(!0!==e.ok)throw Error("Could not fetch the data from this resource");return e.json()})).then((e=>{r.innerHTML="",function(e){if(0===e.items.length)r.insertAdjacentHTML("beforeend",'<div class="repositories__empty">Ничего не найдено</div>');else{r.insertAdjacentHTML("beforeend",'<ul class="repositories__list"></ul>');const t=Math.min(10,e.items.length);document.querySelector(".search-results__title span").textContent=` (${t} из ${e.total_count})`;for(let r=0;r<t;r++)i(e.items[r])}}(e),console.log(e)})).catch((e=>{r.innerHTML="",r.insertAdjacentHTML("beforeend",`<div class="repositories__empty">Ошибка: ${e.message}</div>`)})),this.reset()})),t.addEventListener("input",s)}();